REPOSITORY ?= "vpipes-base-image"
VERSION ?= "16.04"
IMAGE ?= $(REPOSITORY):$(VERSION)
CONSUL_VERSION ?= 0.7.5
CONSUL_TEMPLATE_VERSION ?= 0.18.1

BUILD_OPTIONS = -t $(IMAGE)
BUILD_OPTIONS += --build-arg CONSUL_VERSION=$(CONSUL_VERSION)
BUILD_OPTIONS += --build-arg CONSUL_TEMPLATE_VERSION=$(CONSUL_TEMPLATE_VERSION)

build:
	docker build $(BUILD_OPTIONS) .

clean:
	docker rmi $(IMAGE)
